{% extends "base.html" %}

{% block content %}

<script>
  setTimeout(() => {
    const token = "{{ session.get('token') }}";
    window.location.href = "{{ url_for('log_page') }}" + "?token=" + token;
  }, 5000);
</script>

<h1>TRANSMISSION LOG</h1>

<div class="panel">
  <p class="hint">
    총 {{ rows|length }}개 • 현재 선택: {{ character or "NONE" }}
  </p>

  <div class="log">

    {% if rows|length == 0 %}
      <div class="row">[EMPTY] No transmissions yet.</div>
    {% endif %}

    {% for r in rows %}
      <div class="row {% if r['sender'] == 'H' %}from-h{% else %}from-m{% endif %}">
        <span class="ts">{{ r["created_at"] }}</span>
        <span class="sender">[{{ r["sender"] }}]</span>
        <span class="msg">{{ r["content"] }}</span>
      </div>
    {% endfor %}

  </div>
</div>

<a href="{{ url_for('select') }}">← User 선택으로</a>
{% endblock %}
